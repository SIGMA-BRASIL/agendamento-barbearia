<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <img class="logo" src="https://drive.google.com/uc?export=view&id=1ugDKoi2xSTiHSjIvVuMWqN1zJpI7_m8c" alt="Leal Barbearia">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leal Barbearia ‚Ä¢ Agendamento</title>

  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;800&family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
  :root{
    --gold:#d4af37;
    --dark:#050505;
    --card:#101010;
    --muted:#cfcfcf;
    --line:rgba(212,175,55,.25);
    --radius:18px;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:'Poppins', sans-serif;
    color:#fff;
    background: radial-gradient(circle at top, rgba(212,175,55,.14), transparent 45%),
                linear-gradient(180deg, #000, var(--dark));
  }

  .wrap{
    max-width:560px;
    margin:auto;
    padding:18px 14px 60px;
  }

  header{
    text-align:center;
    padding:18px 14px 10px;
    position:relative;
  }

  .admin-link{
    position:absolute;
    right:14px;
    top:14px;
    font-size:12px;
    opacity:.65;
    cursor:pointer;
    user-select:none;
    border:1px solid rgba(255,255,255,.10);
    padding:8px 10px;
    border-radius:999px;
    background: rgba(0,0,0,.25);
  }

  .admin-link:hover{opacity:1}

  .logo{
    width:130px;
    height:130px;
    object-fit:cover;
    border-radius:26px;
    border:1px solid rgba(212,175,55,.55);
    box-shadow:0 0 45px rgba(212,175,55,.25);
    background:#000;
  }

  h1{
    margin:14px 0 2px;
    letter-spacing:4px;
    font-weight:800;
    color:var(--gold);
    font-size:30px;
    font-family:'Cinzel', serif;
    text-transform:uppercase;
  }

  .subtitle{
    margin:0;
    font-size:13px;
    opacity:.85;
    color:var(--muted);
  }

  .card{
    margin-top:16px;
    background: linear-gradient(180deg, rgba(255,255,255,.03), transparent 50%),
                linear-gradient(145deg, #121212, #070707);
    border:1px solid var(--line);
    border-radius: var(--radius);
    padding:16px;
    box-shadow: 0 20px 70px rgba(0,0,0,.6);
  }

  .title{
    color:var(--gold);
    font-weight:900;
    letter-spacing:1px;
    margin:0 0 12px;
    text-align:center;
    font-family:'Cinzel', serif;
  }

  .info{
    display:grid;
    gap:8px;
    font-size:14px;
    color:var(--muted);
    text-align:center;
  }

  .btn{
    display:block;
    width:100%;
    margin-top:12px;
    padding:14px 12px;
    border-radius:999px;
    font-weight:900;
    letter-spacing:.4px;
    border:none;
    cursor:pointer;
    text-decoration:none;
    text-align:center;
  }

  .btn-gold{
    background: linear-gradient(135deg, #f3df91, var(--gold), #9e7c23);
    color:#000;
  }

  .btn-outline{
    background: transparent;
    border:1px solid rgba(212,175,55,.55);
    color: var(--gold);
  }

  /* Calend√°rio */
  .cal-top{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    margin-bottom:12px;
  }

  .month{
    font-weight:900;
    letter-spacing:1px;
    color:#fff;
  }

  .cal-btn{
    padding:10px 14px;
    border-radius:14px;
    background:#0b0b0b;
    border:1px solid rgba(255,255,255,.08);
    color:#fff;
    cursor:pointer;
    font-weight:800;
  }

  .weekdays{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:8px;
    margin-bottom:10px;
    opacity:.75;
    font-size:12px;
    text-align:center;
    color:var(--muted);
  }

  .days{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:8px;
  }

  .day{
    padding:12px 0;
    text-align:center;
    border-radius:14px;
    background: rgba(255,255,255,.03);
    border:1px solid rgba(255,255,255,.06);
    cursor:pointer;
    font-weight:800;
  }

  .day.disabled{
    opacity:.25;
    cursor:not-allowed;
  }

  .day.selected{
    outline:2px solid rgba(212,175,55,.75);
    background: rgba(212,175,55,.18);
  }

  /* Hor√°rios */
  .slots{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(95px, 1fr));
    gap:10px;
    margin-top:12px;
  }

  .slot{
    padding:12px 10px;
    border-radius:14px;
    text-align:center;
    font-weight:900;
    letter-spacing:.4px;
    border:1px solid rgba(255,255,255,.07);
    user-select:none;
  }

  .slot.free{
    background: rgba(0,170,80,.18);
    border-color: rgba(0,170,80,.35);
    cursor:pointer;
  }

  .slot.busy{
    background: rgba(180,10,10,.20);
    border-color: rgba(180,10,10,.35);
    opacity:.55;
  }

  .slot.selected{
    outline:2px solid rgba(212,175,55,.8);
  }

  label{
    display:block;
    font-size:12px;
    color:var(--muted);
    margin:10px 0 6px;
    margin-left:6px;
  }

  input, select, textarea{
    width:100%;
    padding:13px 14px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.08);
    background: rgba(0,0,0,.35);
    color:#fff;
    outline:none;
  }

  textarea{min-height:90px; resize:none}

  .legend{
    margin-top:10px;
    font-size:12px;
    color:var(--muted);
    opacity:.9;
    text-align:center;
  }

  footer{
    text-align:center;
    margin-top:16px;
    font-size:12px;
    opacity:.75;
    color:var(--muted);
  }

  /* ADMIN */
  #adminPanel{
    display:none;
  }

  .adminBox{
    border:1px solid rgba(212,175,55,.35);
    border-radius:16px;
    padding:14px;
    background: rgba(0,0,0,.35);
  }

  .metricGrid{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
    margin-top:12px;
  }

  .metric{
    padding:12px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,.08);
    background: rgba(255,255,255,.02);
  }

  .metric b{
    display:block;
    color:var(--gold);
    font-size:12px;
    letter-spacing:.4px;
  }

  .metric span{
    font-size:20px;
    font-weight:900;
    display:block;
    margin-top:4px;
  }

</style>
</head>

<body>
<div class="wrap">

  <header>
    <div class="admin-link" onclick="abrirLoginAdmin()">üîí √Årea ADM</div>

    <img class="logo" src="logo.Png" alt="Leal Barbearia">
    <h1>LEAL BARBEARIA</h1>
    <p class="subtitle">Curitiba - PR ‚Ä¢ Seg a S√°b ‚Ä¢ 09:00 √†s 21:00 ‚Ä¢ 40min</p>
  </header>

  <!-- ‚úÖ √ÅREA CLIENTE -->
  <div id="clienteArea">

    <div class="card">
      <h2 class="title">üìç INFORMA√á√ïES</h2>
      <div class="info">
        <div>Rua Vit√≥ria Visinoni Campos N¬∫ 145</div>
        <div>WhatsApp: (41) 9861-1478</div>
      </div>

      <a class="btn btn-outline" target="_blank" href="https://instagram.com/leal_do_corte_">
        üì∏ Instagram @leal_do_corte_
      </a>
    </div>

    <div class="card">
      <h2 class="title">üìÖ ESCOLHA UMA DATA</h2>

      <div class="cal-top">
        <button class="cal-btn" onclick="prevMonth()">‚óÄ</button>
        <div class="month" id="monthLabel">M√™s</div>
        <button class="cal-btn" onclick="nextMonth()">‚ñ∂</button>
      </div>

      <div class="weekdays">
        <div>DOM</div><div>SEG</div><div>TER</div><div>QUA</div><div>QUI</div><div>SEX</div><div>S√ÅB</div>
      </div>

      <div class="days" id="calendarDays"></div>

      <div class="legend">Clique no dia para ver os hor√°rios üü¢/üî¥</div>
    </div>

    <div class="card">
      <h2 class="title">üïí HOR√ÅRIOS</h2>

      <div id="selectedDateText" class="legend">Nenhuma data selecionada</div>
      <div class="slots" id="slots"></div>
      <div class="legend">üü¢ Dispon√≠vel ‚Ä¢ üî¥ Ocupado</div>

      <label>Seu nome</label>
      <input id="nome" placeholder="Ex: Jo√£o Silva">

      <label>Seu telefone</label>
      <input id="telefone" placeholder="Ex: (41) 99999-9999">

      <label>Servi√ßo</label>
      <select id="servico">
        <option value="Cabelo">Cabelo</option>
        <option value="Barba">Barba</option>
        <option value="Cabelo + Barba">Cabelo + Barba</option> valeu="sombrancelha">Sombrancelha</option>
      </select>

      <label>Forma de pagamento</label>
      <select id="pagamento">
        <option value="PIX">PIX</option>
        <option value="Cart√£o">Cart√£o</option>
        <option value="Dinheiro">Dinheiro</option>
      </select>

      <div class="legend" style="margin-top:10px;">
        ‚úÖ PIX: <b style="color:var(--gold)">CHAVE_DO_PIX_AQUI</b><br>
        (copie e pague para confirmar)
      </div>

      <label>Observa√ß√£o</label>
      <textarea id="obs" placeholder="Ex: degrad√™ na 0,5 / design na sobrancelha..."></textarea>

      <a id="btnWhats" class="btn btn-gold" href="#" target="_blank">
        ‚úÖ AGENDAR NO WHATSAPP
      </a>

      <a class="btn btn-outline" id="btnComprovante" href="#" target="_blank">
        üìé ENVIAR COMPROVANTE (WhatsApp)
      </a>

      <footer> ¬© 2026 Leal Barbearia ‚Ä¢ Todos os direitos reservados
‚Ä¢ Agendamento Online</footer>
    </div>

  </div>

  <!-- ‚úÖ √ÅREA ADMIN (DONO) -->
  <div id="adminPanel">
    <div class="card">
      <h2 class="title">üîí PAINEL DO DONO</h2>

      <div class="adminBox">
        <div class="legend" style="margin:0">
          Aqui o dono v√™ controle e relat√≥rios (cliente n√£o v√™).
        </div>

        <div class="metricGrid">
          <div class="metric">
            <b>Janeiro ‚Ä¢ Cortes</b>
            <span id="mCortes">0</span>
          </div>
          <div class="metric">
            <b>Janeiro ‚Ä¢ Barbas</b>
            <span id="mBarbas">0</span>
          </div>
          <div class="metric">
            <b>Janeiro ‚Ä¢ Cabelo+Barba</b>
            <span id="mCombo">0</span>
          </div>
          <div class="metric">
            <b>Janeiro ‚Ä¢ Total</b>
            <span id="mTotal">0</span>
          </div>
        </div>

        <button class="btn btn-outline" onclick="sairAdmin()">üö™ Sair do Admin</button>
      </div>
    </div>
  </div>

</div>

<script>
  const WHATS_NUMERO = "554198611478"; // ‚úÖ certo

  // ‚úÖ senha do admin (troque depois)
  const SENHA_ADMIN = "LEAL2026";

  const timeSlots = [
    "08:00","08:40","09:20","10:00","10:40","11:20",
    "12:00","12:40","13:20","14:00","14:40","15:20",
    "16:00","16:40","17:20","18:00","18:40","19:20",
    "20:00","20:40"
  ];

  // üî¥ Depois conecta com planilha (por enquanto √© vazio)
  const busyByDate = {};

  // ‚úÖ relat√≥rio fake (depois a planilha alimenta)
  const relatorioJaneiro = {cortes: 0, barbas: 0, combo: 0};

  let current = new Date();
  let selectedDate = "";
  let selectedTime = "";

  function abrirLoginAdmin(){
    const senha = prompt("Digite a senha da √Årea do Dono:");
    if(senha === SENHA_ADMIN){
      document.getElementById("clienteArea").style.display = "none";
      document.getElementById("adminPanel").style.display = "block";
      carregarRelatorio();
    }else{
      alert("Senha incorreta ‚ùå");
    }
  }

  function sairAdmin(){
    document.getElementById("adminPanel").style.display = "none";
    document.getElementById("clienteArea").style.display = "block";
  }

  function carregarRelatorio(){
    const total = relatorioJaneiro.cortes + relatorioJaneiro.barbas + relatorioJaneiro.combo;
    document.getElementById("mCortes").innerText = relatorioJaneiro.cortes;
    document.getElementById("mBarbas").innerText = relatorioJaneiro.barbas;
    document.getElementById("mCombo").innerText = relatorioJaneiro.combo;
    document.getElementById("mTotal").innerText = total;
  }

  function formatMonthLabel(date){
    const months = ["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];
    return months[date.getMonth()] + " " + date.getFullYear();
  }

  function pad(n){ return String(n).padStart(2,'0'); }

  function toYMD(year, monthIndex, day){
    return `${year}-${pad(monthIndex+1)}-${pad(day)}`;
  }

  function renderCalendar(){
    document.getElementById("monthLabel").innerText = formatMonthLabel(current);

    const year = current.getFullYear();
    const month = current.getMonth();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month+1, 0).getDate();

    const cal = document.getElementById("calendarDays");
    cal.innerHTML = "";

    for(let i=0;i<firstDay;i++){
      const d = document.createElement("div");
      d.className = "day disabled";
      d.innerText = "";
      cal.appendChild(d);
    }

    for(let day=1; day<=daysInMonth; day++){
      const ymd = toYMD(year, month, day);
      const btn = document.createElement("div");
      btn.className = "day";
      btn.innerText = day;

      const today = new Date();
      const dateObj = new Date(year, month, day);
      today.setHours(0,0,0,0);

      if(dateObj < today){
        btn.classList.add("disabled");
      }else{
        btn.onclick = ()=> selectDate(ymd, btn);
      }

      if(ymd === selectedDate) btn.classList.add("selected");

      cal.appendChild(btn);
    }
  }

  function selectDate(ymd, element){
    selectedDate = ymd;
    selectedTime = "";

    document.querySelectorAll(".day").forEach(d=> d.classList.remove("selected"));
    element.classList.add("selected");

    document.getElementById("selectedDateText").innerText = "Data selecionada: " + ymd;
    renderSlots();
    updateWhatsLinks();
  }

  function renderSlots(){
    const slots = document.getElementById("slots");
    slots.innerHTML = "";

    if(!selectedDate){
      slots.innerHTML = "<div class='legend'>Selecione uma data primeiro ‚úÖ</div>";
      return;
    }

    const busyList = new Set(busyByDate[selectedDate] || []);

    timeSlots.forEach(t=>{
      const s = document.createElement("div");
      const isBusy = busyList.has(t);

      s.className = "slot " + (isBusy ? "busy" : "free");
      s.innerText = t;

      if(!isBusy){
        s.onclick = ()=>{
          document.querySelectorAll(".slot").forEach(x=> x.classList.remove("selected"));
          s.classList.add("selected");
          selectedTime = t;
          updateWhatsLinks();
        };
      }

      slots.appendChild(s);
    });
  }

  function prevMonth(){
    current.setMonth(current.getMonth() - 1);
    renderCalendar();
  }

  function nextMonth(){
    current.setMonth(current.getMonth() + 1);
    renderCalendar();
  }

  function updateWhatsLinks(){
    const nome = document.getElementById("nome").value.trim();
    const telefone = document.getElementById("telefone").value.trim();
    const servico = document.getElementById("servico").value;
    const pagamento = document.getElementById("pagamento").value;
    const obs = document.getElementById("obs").value.trim();

    const btn = document.getElementById("btnWhats");
    const btnComp = document.getElementById("btnComprovante");

    if(!selectedDate || !selectedTime){
      btn.href = "#";
      btnComp.href = "#";
      return;
    }

    const msg =
`Ol√°! Quero agendar na LEAL BARBEARIA ‚úÖ

üë§ Nome: ${nome || "N√£o informado"}
üìû Telefone: ${telefone || "N√£o informado"}
üìÖ Data: ${selectedDate}
üïí Hor√°rio: ${selectedTime}
üíà Servi√ßo: ${servico}
üí≥ Pagamento: ${pagamento}

üìù Obs: ${obs || "Sem observa√ß√µes"}`;

    btn.href = "https://wa.me/" + WHATS_NUMERO + "?text=" + encodeURIComponent(msg);

    const msgComp = `Ol√°! Segue o comprovante do meu agendamento ‚úÖ\n\nüìÖ ${selectedDate}\nüïí ${selectedTime}\nüë§ ${nome || ""}`;
    btnComp.href = "https://wa.me/" + WHATS_NUMERO + "?text=" + encodeURIComponent(msgComp);
  }

    
  ["nome","telefone","servico","pagamento","obs"].forEach(id=>{
    document.getElementById(id).addEventListener("input", updateWhatsLinks);
    document.getElementById(id).addEventListener("change", updateWhatsLinks);
  });

  renderCalendar();
  renderSlots();
</script>
<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/1NQNYt1AkGFU75WFrWkXwpqugGH5TXwVUZ9r0AGnm_xY/export?format=csv";


const horarios = [
  "09:00","09:40","10:20","11:00","11:40","12:20",
  "13:00","13:40","14:20","15:00","15:40","16:20",
  "17:00","17:40","18:20","19:00","19:40","20:20"
];
const hoje = new Date().toISOString().split("T")[0];
const agora = new Date();

async function carregarAgendamentos() {
  const resp = await fetch(csvUrl);
  const texto = await resp.text();
  const linhas = texto.split("\n").slice(1);

  return linhas.map(l => {
    const [data, horario, status] = l.split(",");
    return { data, horario, status };
  });
}

function criarHorarios(ocupados) {
  const container = document.getElementById("horarios");
  container.innerHTML = "";

  horarios.forEach(h => {
    const btn = document.createElement("button");
    btn.innerText = h;

    const dataHora = new Date(`${hoje}T${h}:00`);

    const jaPassou = dataHora < agora;
    const ocupado = ocupados.some(o =>
      o.data === hoje && o.horario === h && o.status.trim() === "OCUPADO"
    );

    if (jaPassou || ocupado) {
      btn.style.background = "#c0392b";
      btn.disabled = true;
    } else {
      btn.style.background = "#2ecc71";
      btn.onclick = () => agendarHorario(h, btn);
    }

    container.appendChild(btn);
  });
}

function agendarHorario(horario, botao) {
  const telefone = "55SEUNUMEROAQUI";
  const msg = `Ol√°! Gostaria de agendar um hor√°rio √†s ${horario}`;
  const link = `https://wa.me/${telefone}?text=${encodeURIComponent(msg)}`;

  botao.style.background = "#c0392b";
  botao.disabled = true;

  window.open(link, "_blank");
}

(async () => {
  const ocupados = await carregarAgendamentos();
  criarHorarios(ocupados);
})();
</script>
</body>
    
